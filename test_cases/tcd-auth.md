# Тест-кейсы: Модуль авторизации в ТСД

**Назначение:** Проверка функциональности входа и выхода пользователя в мобильном приложении Терминала Сбора Данных (ТСД).
**Окружение:** ТСД на Android, версия ОС 8.0+, приложение v2.1.0

---

## Список тест-кейсов

### **AUTH-01: Успешная авторизация с валидными учетными данными**

**Предусловия:**
1. ТСД включен и имеет стабильное подключение к сети Wi-Fi.
2. Пользователь с логином `worker_25` и паролем `Pass1234` существует в системе и активен.
3. Приложение "Склад" установлено и запущено на ТСД.

**Шаги:**
1. На экране приветствия нажать кнопку "Войти".
2. В поле "Логин" ввести `worker_25`.
3. В поле "Пароль" ввести `Pass1234`.
4. Нажать кнопку "Войти".

**Ожидаемый результат:**
*   Происходит перенаправление на главный экран приложения.
*   В верхнем правом углу отображается приветствие: "Добро пожаловать, Иван Петров".
*   Отображается меню доступных операций ("Приемка", "Отбор", "Инвентаризация").
*   Кешируется токен сессии для последующих запросов.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-02: Попытка входа с неверным паролем**

**Предусловия:**
1. ТСД включен и имеет подключение к сети.
2. Пользователь с логином `worker_25` существует в системе.

**Шаги:**
1. В поле "Логин" ввести `worker_25`.
2. В поле "Пароль" ввести `WrongPassword`.
3. Нажать кнопку "Войти".

**Ожидаемый результат:**
*   Авторизация не происходит.
*   Отображается всплывающее сообщение об ошибке: "Неверный логин или пароль".
*   Поле "Пароль" очищается.
*   Фокус остается на поле "Пароль".
*   Сессия не создается.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-03: Попытка входа с несуществующим логином**

**Предусловия:**
1. ТСД включен и имеет подключение к сети.

**Шаги:**
1. В поле "Логин" ввести `unknown_user`.
2. В поле "Пароль" ввести любой пароль.
3. Нажать кнопку "Войти".

**Ожидаемый результат:**
*   Авторизация не происходит.
*   Отображается всплывающее сообщение об ошибке: "Неверный логин или пароль".
*   Поле "Пароль" очищается.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-04: Авторизация при отсутствии сетевого соединения**

**Предусловия:**
1. ТСД включен, но Wi-Fi отключен или нет подключения к серверу.
2. Учетные данные пользователя `worker_25`/`Pass1234` валидны.

**Шаги:**
1. Отключить Wi-Fi на ТСД.
2. Ввести валидные логин и пароль.
3. Нажать кнопку "Войти".

**Ожидаемый результат:**
*   Авторизация не происходит.
*   Отображается сообщение: "Отсутствует подключение к серверу. Проверьте настройки сети".
*   Предлагается перейти в настройки для подключения к Wi-Fi.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-05: Выход из системы (Logout)**

**Предусловия:**
1. Пользователь успешно авторизован в системе и находится на главном экране.

**Шаги:**
1. Нажать на иконку меню (три точки) в правом верхнем углу.
2. В выпадающем меню выбрать пункт "Выйти".
3. Подтвердить выход в диалоговом окне ("Да" / "Нет"), нажав "Да".

**Ожидаемый результат:**
*   Происходит перенаправление на экран ввода логина и пароля.
*   Токен сессии аннулируется на стороне клиента и сервера.
*   Все последующие запросы к API без авторизации возвращают ошибку 401.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-06: Безопасность пароля (скрытие символов)**

**Предусловия:**
1. Приложение запущено, открыт экран авторизации.

**Шаги:**
1. В поле "Пароль" ввести любой текст.

**Ожидаемый результат:**
*   Вводимые символы отображаются как точки (`•`) или звездочки (`*`).
*   Текст пароля нигде не отображается в открытом виде.
*   Статус: **ПРОЙДЕН**

---

### **AUTH-07: Автоматический выход при неактивности (таймаут сессии)**

**Предусловия:**
1. Пользователь авторизован и находится на главном экране.
2. Настройка таймаута сессии на сервере = 15 минут.

**Шаги:**
1. Оставить приложение открытым на главном экране без действий на 16 минут.
2. Попытаться выполнить любое действие (например, нажать "Приемка").

**Ожидаемый результат:**
*   По истечении времени сессия истекает.
*   При попытке действия появляется сообщение: "Ваша сессия истекла. Требуется повторный вход".
*   Пользователь перенаправляется на экран авторизации.
*   Статус: **ПРОЙДЕН**
